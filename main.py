import os
from flask import Flask, request
import telebot
from telebot import types

# يتم جلب التوكن من متغيرات البيئة.
# تأكد من أن متغير البيئة TELEGRAM_TOKEN مضبوط بشكل صحيح في إعدادات Render.
TOKEN = os.getenv("TELEGRAM_TOKEN")
if not TOKEN:
    raise ValueError("⚠️ متغير البيئة TELEGRAM_TOKEN غير موجود. الرجاء إضافته في إعدادات Render.")

# تهيئة كائن البوت باستخدام التوكن
bot = telebot.TeleBot(TOKEN)
# تهيئة تطبيق Flask
app = Flask(__name__)

# عنوان URL لخدمة Render الخاصة بك.
# تم تحديث هذا العنوان ليتوافق مع العنوان الصحيح الذي قدمته: https://ksa-diploma-bot.onrender.com
RENDER_WEBHOOK_URL = "https://ksa-diploma-bot.onrender.com/" + TOKEN

# -- قائمة الأوامر على اليسار (أزرار في لوحة المفاتيح) --
left_commands = ["star", "help"]

# --- قائمة يمين البوت: التبويبات 1 إلى 10 (أزرار في لوحة المفاتيح) ---
right_tabs = [
    "تقويم عام 1447ه‍.",
    "خدمات التواصل مع الجامعة",
    "الاسئلة الشائعة_عام",
    "تخصصات برامج الدبلوم - حضوري",
    "تخصصات برامج الدبلوم - عن بُعد",
    "قناة وإعلانات الدبلوم 📢",
    "خدمات حل الواجبات وعمل المشاريع والبحوث",
    "مواقع فروع جامعة الملك سعود",
    "شروط التجسير في جامعة الملك سعود",
    "🛑شرح استخدام – البلاك بورد / Blackboard 🛑"
]

# قاموس لتخزين حالة القائمة الحالية لكل مستخدم
# هذا يسمح للبوت بتذكر أين كان المستخدم في القوائم المتداخلة
user_states = {} # {chat_id: current_menu_key}

# قاموس شامل لتخزين جميع محتويات البوت، بما في ذلك النصوص والقوائم الفرعية
# تم تحويل جميع النصوص الطويلة إلى تنسيق HTML متوافق مع تليجرام
bot_content = {
    "تقويم عام 1447ه‍.": "التقويم الدراسي للعام الجامعي 1447هـ في جامعة الملك سعود لم يُنشر بشكل رسمي بعد",
    "خدمات التواصل مع الجامعة": """عمادة السنة الأولى المشتركة
SSHELP@CFY.KSU.EDU.SA
00966-114694006

الشؤون الطلابية
ksugcc@ksu.edu.sa
00966 1 8050141

المشرف على وحدة التوجيه و الإرشاد الطلابي
sg@cfy.ksu.edu.sa
4694118
رقم المكتب: 2484

المشرف على وحدة شؤون الطلاب
sa@cfy.ksu.edu.sa

ايميلات عمادة القبول والتسجيل
dar@ksu.edu.sa
darweb@ksu.edu.sa

ارقام عمادة القبول والتسجيل
0114677722
0118054402

منسق/ة الفيزياء
nbennessib@ksu.edu.sa
nalkathran@ksu.edu.sa

منسق احياء
aalii@ksu.edu.sa
somer@ksu.edu.sa

منسق كيم
amenizi@ksu.edu.sa
zalmarhoon@ksu.edu.sa

منسق/ة انجل
mramadan@cfy.ksu.edu.sa
h.alshareef@cfy.ksu.edu.sa

فرع عليشه ( بنات)
011 805 7331

فرع الناصريه( الوشم بمسمى اخر)
0114036600""",
    "الاسئلة الشائعة_عام": """●الاسئلة الشائعة -عام
◇ الأسئلة الشائعة حول القبول:
<a href="https://dar.ksu.edu.sa/ar/FAQ">https://dar.ksu.edu.sa/ar/FAQ</a>
◇ الاسئلة الشائعة للطلاب المنتظمين:
<a href="https://dar.ksu.edu.sa/ar/faqs">https://dar.ksu.edu.sa/ar/faqs</a>
◇ الاسئلة الشائعة للطلاب الخريجين :
<a href="https://dar.ksu.edu.sa/ar/gfaq">https://dar.ksu.edu.sa/ar/gfaq</a>""",
    "تخصصات برامج الدبلوم - حضوري": {
        "menu_text": "الرجاء اختيار تخصص الدبلوم الحضوري:",
        "options": [
            "دبلوم محاسبة",
            "دبلوم التسويق",
            "دبلوم الأنظمة",
            "دبلوم البرمجة وقواعد البيانات",
            "دبلوم السكرتارية الطبية",
            "دبلوم الاعمال المصرفية",
            "دبلوم الوسائط المتعددة التفاعلية",
            "دبلوم الامن السيبراني",
            "دبلوم السكرتارية التنفيذية",
            "دبلوم تقنية النظارات",
            "دبلوم إدارة الموارد البشرية",
            "دبلوم المحاسبة الضريبية",
            "دبلوم الترجمة بلغة الإشارة",
            "دبلوم مقدمي الرعاية بالحضانات",
            "دبلوم اللغة الصينية",
            "الدبلوم المشارك في العمل الخيري",
            "🔙 رجوع"
        ],
        "دبلوم محاسبة": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في المحاسبة – جامعة الملك سعود</b>
<b>الرؤية العامة:</b>
يهدف البرنامج إلى تلبية متطلبات سوق العمل السعودي من الكوادر المؤهلة في المحاسبة، من خلال إعداد خريجين يمتلكون المعارف والمهارات اللازمة لأداء المهام المحاسبية بكفاءة.
\n<b>🎯 الأهداف الرئيسة:</b>
• توفير بيئة أكاديمية متطورة لإعداد كوادر متميزة.
• تأهيل الطلبة بأحدث المفاهيم والمعارف النظرية والتطبيقية.
• تنمية المهارات الفكرية والبحثية للعمل بكفاءة عالية.
• تطوير المهارات العملية لإنجاز الأنشطة المحاسبية.
• تدريب الطلاب على استخدام الحاسب الآلي والتطبيقات المحاسبية الحديثة.
• تقديم مرجعية علمية تجمع بين الجانب النظري والتطبيقي.
\n\n<b>💼 الفرص الوظيفية:</b>
• مساعد محاسب، محصل إيرادات، مأمور مبيعات، أمين صندوق، مأمور عهد، مراقب عهد، مراقب مخازن، أمين مستودع، مفتش تموين، مأمور مشتريات، مراقب تجاري، مساعد مدقق حسابات، كاتب إداري في الإدارة المالية، مساعد مدرب في مجال التخصص.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في المحاسبة (الجديدة): <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D9%85%D8%AD%D8%A7%D8%B3%D8%A8%D8%A9_0.pdf\">الرابط</a>",
            "وصف المقررات": "وصف المقررات الدراسية للدبلوم المتوسط في المحاسبة (الجديدة): <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/wsf_lmqrrt_ldblwm_lmhsb.pdf\">الرابط</a>"
        },
        "دبلوم التسويق": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في التسويق – جامعة الملك سعود</b>
<b>الرؤية العامة:</b>
يهدف البرنامج إلى إعداد كوادر مهنية متمكنة للعمل بكفاءة عالية في الوظائف المتخصصة في قطاعات الأعمال بالمملكة، بتزويدهم بالمعارف والمهارات العملية التسويقية.
\n\n<b>🎯 الأهداف الرئيسة:</b>
• تأهيل الطلاب نظريًا وعمليًا في التسويق الحديث.
• تدريب الطلاب على التطبيقات العملية.
• تمكين الطلاب من استخدام تقنيات المعلومات في اتخاذ القرارات التسويقية.
• تنمية قدرة الطلاب على التعامل مع المشكلات التسويقية.
• إعداد الطلاب للتفاعل الفعال مع التحديات المستقبلية.
\n\n<b>📘 المخرجات المعرفية:</b>
• فهم عميق للمفاهيم والمبادئ والتقنيات التسويقية.
• التعرف على القضايا والاتجاهات الحالية في بيئة التسويق.
• فهم أدوات وتقنيات التسويق من منظور داخلي وخارجي.
• التمكن من استخدام التكنولوجيات الحديثة في التعامل مع العملاء.
• الإلمام بالأساليب والمنهجيات المستخدمة في البحوث التسويقية.
\n\n<b>🛠 المخرجات المهارية:</b>
• القدرة على العمل ضمن فرق أو بشكل فردي.
• إدراك الجوانب الأخلاقية المتعلقة بمهنة التسويق.
• التواصل الفعال كتابيًا وشفويًا باستخدام الوسائل الرقمية.
• توظيف المهارات العددية والتحليلية في حل المشكلات.
\n\n<b>💼 الفرص الوظيفية:</b>
• مأمور مبيعات، مساعد مدرب (في مجال التخصص)، مدقق مشتريات مساعد، محصل إيرادات، مأمور مشتريات، مراقب تجاري، كاتب في إدارة التسويق.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في التسويق (الجديدة): <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D8%AA%D8%B3%D9%88%D9%8A%D9%82_0.pdf\">الرابط</a>",
            "وصف المقررات": "وصف المقررات الدراسية للدبلوم المتوسط في التسوق: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/imce_images/2_4.pdf\">الرابط</a>"
        },
        "دبلوم الأنظمة": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في الأنظمة – جامعة الملك سعود</b>
<b>الرؤية العامة:</b>
يهدف البرنامج إلى إعداد كوادر قانونية مؤهلة للعمل بكفاءة في القطاعات الإدارية والاستثمارية، والمساهمة في تطوير المنظومة القانونية بما يتوافق مع رؤية 2030.
\n\n<b>🎯 الأهداف الرئيسة:</b>
• تأهيل كفاءات قانونية قادرة على المنافسة في سوق العمل.
• دعم تطوير وتفعيل الأنظمة القانونية الحديثة.
• تعزيز الثقافة القانونية ونشر الوعي.
• تطوير التدريب الميداني للطلاب.
• توظيف الخبرات لتطوير البحث العلمي وجودة التعليم.
\n\n<b>💼 الفرص الوظيفية:</b>
<b>أولاً – في القطاع التجاري والاستثماري:</b>
• مراقب تجاري، مراقب جمركي، مدقق جمركي، مدقق طلبات، مراجع قانوني.
<b>ثانيًا – في القطاع الإداري والعدلي:</b>
• مساعد إداري، مساعد محامٍ، كاتب عدل، كاتب ضبط، مدقق قانوني، مدخل بيانات قانونية.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في الأنظمة (الجديدة): <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D8%A3%D9%86%D8%B8%D9%85%D8%A9_0.pdf\">الرابط</a>",
            "وصف المقررات": "وصف المقررات الدراسية للدبلوم المتوسط في الأنظمة: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/imce_images/2_2.pdf\">الرابط</a>"
        },
        "دبلوم البرمجة وقواعد البيانات": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في برمجة وقواعد البيانات – جامعة الملك سعود</b>
<b>الرؤية العامة:</b>
يهدف البرنامج إلى إعداد كوادر فنية متخصصة ومؤهلة في مجالي البرمجة وقواعد البيانات، لتلبية احتياجات سوق العمل من خلال التدريب العملي والمعرفة التقنية الحديثة.
\n\n<b>🎯 الأهداف الرئيسة:</b>
• تخريج فنيين متخصصين في تصميم نظم البرمجة وقواعد البيانات.
• تدريب الطلاب على أحدث أساليب وتقنيات البرمجة.
• تعريف الطلاب بمفاهيم تحليل وتصميم النظم.
• إكساب الدارسين مهارات تصميم وصيانة قواعد البيانات.
• تأهيل الطلاب لفهم نظم التشغيل الحديثة.
\n\n<b>💼 الفرص الوظيفية:</b>
• مساعد مبرمج، مشغّل أجهزة حاسب آلي، فني مواصفات ومقاييس، مساعد مدرب (في مجال التخصص).
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في البرمجة وقواعد البيانات (الجديدة): <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D8%A8%D8%B1%D9%85%D8%AC%D8%A9_%D9%88%D9%82%D9%88%D8%A7%D8%B9%D8%AF_%D8%A7%D9%84%D8%A8%D9%8A%D8%A7%D9%86%D8%A7%D8%AA_0.pdf\">الرابط</a>",
            "وصف المقررات": "وصف المقررات الدراسية للدبلوم المتوسط في البرمجة وقواعد البيانات: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/twsyf_lmqrrt_lbrnmj_ldblwm_fy_lbrmj_wqwd_lbynt.pdf\">الرابط</a>"
        },
        "دبلوم السكرتارية الطبية": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في السكرتارية الطبية – جامعة الملك سعود</b>
<b>الرؤية العامة:</b>
يهدف البرنامج إلى تأهيل كوادر وطنية متخصصة في السكرتارية الطبية، للعمل بكفاءة واحترافية في المنشآت الصحية وتلبية احتياجات سوق العمل.
\n\n<b>🎯 الأهداف الرئيسة:</b>
• إعداد كوادر مؤهلة للعمل في السكرتارية الطبية.
• إكساب الطلاب المهارات الإدارية والفنية الأساسية.
• تنمية السلوكيات المهنية ومهارات التواصل.
• الإلمام بالنظام الصحي السعودي وكيفية التعامل مع التأمين.
• تدريب الطلاب على المهام المكتبية باستخدام التقنيات الحديثة.
• تعزيز مهارات اللغة الإنجليزية الطبية.
\n\n<b>💼 الفرص الوظيفية:</b>
• مصنّف من <b>وزارة الخدمة المدنية</b> ومعتمد من <b>هيئة التخصصات الصحية</b>.
• التعيين على <b>كادر الوظائف الصحية – المرتبة السادسة</b>.
• سكرتير طبي في المستشفيات (الحكومية والخاصة).
• فني سجلات طبية في القطاعات الصحية.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في السكرتارية الطبية (الجديدة): <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D9%85%D8%AD%D8%A7%D8%B3%D8%A8%D8%A9_%D8%A7%D9%84%D9%85%D8%AA%D9%88%D8%B3%D8%B7%D8%A9_0.pdf\">الرابط</a>",
            "وصف المقررات": "وصف المقررات الدراسية للدبلوم المتوسط في السكرتارية الطبية (الجديدة): <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/wsf_mqrrt_dblwm_lskrtry_ltby.pdf\">الرابط</a>"
        },
        "دبلوم الاعمال المصرفية": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            # هذا المحتوى هو نفسه الموجود في دبلوم الإدارة المالية والمصرفية - عن بعد.
            "تعريف بالتخصص": """🎓 <b>الدبلوم المتوسط في الإدارة المالية والمصرفية – جامعة الملك سعود</b>
يهدف البرنامج إلى إعداد كوادر مؤهلة في المالية والمصرفية، قادرة على مواكبة التغيرات الاقتصادية وتلبية احتياجات سوق العمل.
\n\n<b>🎯 الأهداف:</b>
1.  إكساب المعرفة بالمفاهيم والمبادئ والأنظمة المالية والمصرفية.
2.  تأهيل الطلاب للتطورات الحديثة في القطاع.
3.  إعداد الخريجين لوظائف متنوعة في المؤسسات المالية والبنكية.
4.  تنمية مهاراتهم التحليلية، التواصلية، والرقمية.
\n\n<b>📘 المخرجات:</b>
•   فهم الأدوات المالية، التحليل المالي، أنواع المؤسسات والأسواق المالية، وأساسيات الإدارة المالية والاستثمار.
•   القدرة على تحليل البيانات المالية، التنبؤ بالمخاطر، وحل القضايا المالية.
•   الالتزام بالأخلاقيات المهنية والعمل الجماعي.
•   إتقان الاتصال الشفهي والكتابي، استخدام التحليل الكمي، وتوظيف الحاسب الآلي في المهام المالية.
\n\n<b>💼 الفرص الوظيفية:</b>
يشمل العمل في:
•   المنشآت الاقتصادية، البنوك (تجارية وإسلامية)، شركات التأمين، البنك المركزي السعودي، مكاتب الصرافة.
•   القطاعات المالية بالجهات الحكومية، وزارة المالية.
\n<b>أمثلة للوظائف:</b>
•   أمين صندوق، مأمور صرف، مساعد مدير مالي، مراقب مالي، مدقق حسابات، محصل إيرادات، مراقب تجاري.
وغيرها من الوظائف ذات الصلة بالمجال المالي والمصرفي.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في الإدارة المالية والمصرفية: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D8%A5%D8%AF%D8%A7%D8%B1%D8%A9_%D8%A7%D9%84%D9%85%D8%A7%D9%84%D9%8A%D8%A9_%D9%88%D8%A7%D9%84%D9%85%D8%B5%D8%B1%D9%81%D9%8A%D8%A9_%D8%B9%D9%86_%D8%A8%D8%B9%D8%AF.pdf\">الرابط</a>",
            "وصف المقررات": "وصف المقررات للدبلوم المتوسط في الإدارة المالية والمصرفية: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/dblwm_ldr_lmly_wlmsrfy.pdf\">الرابط</a>"
        },
        "دبلوم الوسائط المتعددة التفاعلية": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في الوسائط المتعددة التفاعلية – جامعة الملك سعود</b>
<b>الرؤية العامة:</b>
يهدف البرنامج إلى إعداد كوادر وطنية متخصصة في الوسائط المتعددة التفاعلية، قادرة على العمل ضمن فرق متعددة التخصصات، والمساهمة في دعم التحول الرقمي وتحقيق رؤية المملكة 2030.
\n\n<b>🎯 الأهداف:</b>
• تأهيل طلاب متخصصين في تصميم وتطوير الوسائط التفاعلية.
• ربط مخرجات البرنامج بمتطلبات سوق العمل الرقمي.
• تزويد الطلاب بأحدث المهارات التقنية والتطبيقات العملية.
• تعزيز الابتكار والتميّز في التصميم الرقمي.
• دعم التميز المحلي والإقليمي في مجالات الوسائط الرقمية.
\n\n<b>💼 الفرص الوظيفية:</b>
• تصميم وإنتاج الوسائط المتعددة والتصميم ثلاثي الأبعاد.
• شركات إنتاج الألعاب الإلكترونية والرسوم المتحركة.
• شركات تطوير مواقع الويب والتطبيقات التفاعلية.
• المؤسسات الإعلامية التقليدية والرقمية.
• شركات الدعاية والإعلان والإنتاج الإبداعي.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في الوسائط المتعددة التفاعلية: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D9%88%D8%B3%D9%8A%D8%A7%D8%A6%D8%B7_%D8%A7%D9%84%D9%85%D8%AA%D8%B9%D8%AF%D8%AF%D8%A9_%D8%A7%D9%84%D9%81%D8%A7%D8%B9%D9%84%D9%8A%D8%A9_0.pdf\">الرابط</a>",
            "وصف المقررات": "وصف المقررات الدراسية للدبلوم المتوسط في الوسائط المتعددة التفاعلية: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/wsf_lmqrrt_lbrnmj_ldblwm_fy_lwsyt_lmtdd_ltfly.pdf\">الرابط</a>"
        },
        "دبلوم الامن السيبراني": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في الأمن السيبراني – جامعة الملك سعود</b>
<b>مقدمة:</b>
يُعد الأمن السيبراني من المجالات الحيوية لحماية الأنظمة والشبكات والبرامج من الهجمات الإلكترونية، وحماية المستخدمين من الابتزاز ومقاطعة العمليات التجارية. الحاجة ملحة لكوادر وطنية مؤهلة لمواجهة هذه التحديات.
\n\n<b>🎯 الأهداف العامة:</b>
• تزويد الطالب بالمهارات الأساسية في أمن المعلومات والجرائم الإلكترونية.
• تأهيل الطالب للتعامل مع القضايا الأخلاقية والقانونية.
• تنمية قدرة الطالب على اكتشاف نقاط الضعف في الشبكات.
• تعليم الطالب أساليب صد الهجمات الإلكترونية وحماية الأنظمة.
• تأهيل الطالب لمهارات التحقيقات الجنائية الرقمية وتحليل الأدلة.
\n\n<b>💼 مخرجات البرنامج وفرص العمل:</b>
• أمن المعلومات، تقنية المعلومات، أمن الشبكات، أمن الإنترنت.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في الأمن السيبراني: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D9%81%D8%A3%D9%85%D9%86_%D8%A7%D9%84%D8%B3%D9%8A%D8%A8%D8%B1%D8%A7%D9%86%D9%8A_0.pdf\">الرابط</a>"
        },
        "دبلوم السكرتارية التنفيذية": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في السكرتارية التنفيذية – جامعة الملك سعود</b>
يهدف البرنامج إلى تأهيل الطلاب بالمهارات والمعارف اللازمة لأداء مهام السكرتارية التنفيذية بكفاءة عالية.
\n\n<b>🗂 الخطة الدراسية تتضمن:</b>
• مهارات الاتصال الفعال، إدارة المكاتب وتنظيم العمل، تقنيات الحاسوب وبرامج الأوفيس، إدارة الاجتماعات وتنظيم الفعاليات، مهارات كتابة التقارير والمراسلات، قواعد السلوك المهني وأخلاقيات العمل، إدارة الوقت والمهام، التخطيط والتنظيم الإداري.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في السكرتارية التنفيذية: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D8%B3%D9%83%D8%B1%D8%AA%D8%A7%D8%B1%D9%8A%D8%A9_%D8%A7%D9%84%D8%AA%D9%86%D9%81%D9%8A%D8%B0%D9%8A%D9%8A%D8%A9_0.pdf\">الرابط</a>"
        },
        "دبلوم تقنية النظارات": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط فني تقنية النظارات – جامعة الملك سعود</b>
<b>الرؤية العامة:</b>
يهدف البرنامج إلى تخريج فنيي نظارات سعوديين مؤهلين علمياً وعملياً ليكونوا جزءاً فعالاً من فريق الرعاية البصرية في المملكة، بما يدعم رؤية 2030 لتوطين قطاع البصريات ورفع جودة الخدمات.
\n\n<b>🎯 الأهداف:</b>
• إعداد فنيين مؤهلين للعمل مع أطباء العيون ودكاترة البصريات.
• إتقان المهارات الإدارية المتعلقة بالبيع والتسويق.
• توطين نشاط قطاع البصريات ورفع مستوى الخدمات.
\n\n<b>📘 المخرجات:</b>
• كوادر فنية ماهرة في قص العدسات وتنفيذ الأعمال الفنية.
• كوادر قادرة على إرشاد وتلبية احتياجات مراجعي محال البصريات.
• كوادر إدارية متخصصة في مجالات البيع، الإدارة، والتسويق.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط فني تقنية النظارات: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%AA%D9%82%D9%86%D9%8A%D8%A9_%D8%A7%D9%84%D9%86%D8%B8%D8%A7%D8%B1%D8%A7%D8%AA_0.pdf\">الرابط</a>"
        },
        "دبلوم إدارة الموارد البشرية": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في إدارة الموارد البشرية – جامعة الملك سعود</b>
<b>الرؤية العامة:</b>
يهدف البرنامج إلى تأهيل الطلاب علمياً وعملياً لسوق العمل في هذا المجال، بتزويدهم بالمعارف والمهارات اللازمة للأداء بكفاءة وفعالية، بما يتوافق مع احتياجات سوق العمل السعودي.
\n\n<b>🎯 الأهداف:</b>
• تزويد الطلاب بالمعارف والمهارات في إدارة الموارد البشرية.
• غرس السلوكيات والأخلاقيات المهنية.
• مواكبة احتياجات سوق العمل لتعزيز فرص التوظيف.
• تحسين جودة البرنامج بما يتماشى مع معايير الاعتماد.
• تطوير بيئة أكاديمية وإدارية متميزة.
• بناء شراكات فعالة مع منظمات الأعمال والمؤسسات الحكومية.
\n\n<b>💼 الفرص الوظيفية:</b>
• العمل في القطاع الحكومي، الخاص، والمنظمات غير الربحية، في مجالات: التوظيف والتدريب، استراتيجيات الموارد البشرية، تخطيط القوى العاملة، التعويضات، إدارة أنشطة التوظيف، تطوير المسار الوظيفي، والعلاقات العمالية.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في إدارة الموارد البشرية: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%AA%D9%82%D9%86%D9%8A%D8%A9_%D8%A7%D9%84%D9%86%D8%B8%D8%A7%D8%B1%D8%A7%D8%AA\">الرابط</a>" # الرابط الأصلي يشير إلى "تقنية النظارات"
        },
        "دبلوم المحاسبة الضريبية": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في المحاسبة الضريبية – جامعة الملك سعود</b>
<b>الخطة الدراسية:</b>
توفر الخطة الدراسية مقررات متخصصة تهدف إلى تأهيل الطلاب بفهم شامل ومتقدم لأنظمة المحاسبة الضريبية والتشريعات المتعلقة بها، بما يمكنهم من العمل بكفاءة في المجالات المحاسبية والضريبية.
""",
            "الخطة الدراسية": "الخطة الدراسية لدبلوم المحاسبة الضريبية: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D9%85%D8%AD%D8%A7%D8%B3%D8%A8%D8%A9_%D8%A7%D9%84%D8%B6%D8%B1%D9%8A%D8%A8%D9%8A%D8%A9.pdf\">الرابط</a>"
        },
        "دبلوم الترجمة بلغة الإشارة": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في الترجمة بلغة الإشارة – جامعة الملك سعود</b>
\n\n<b>🎯 الأهداف:</b>
• إعداد وتأهيل كوادر متخصصة في تقديم خدمات ترجمة لغة الإشارة للأشخاص الصم وضعاف السمع.
• تأهيل العاملين في القطاعين الحكومي والخاص لاكتساب مهارات لغة الإشارة.
• توفير بيئة أكاديمية متخصصة تقدم الكفايات المهنية.
• تدريب العاملين على أخلاقيات ترجمة لغة الإشارة.
• تقديم مرجعية علمية واستشارية لبرامج لغة الإشارة.
• تمكين البرنامج ليكون المرجع الرئيسي لإعداد وتدريب العاملين مع الصم.
• التنسيق مع الجهات المعنية لتقديم دورات تدريبية مستمرة.
• منح تراخيص لمترجمي لغة الإشارة.
\n\n<b>💼 الفرص الوظيفية:</b>
• مرشدين ومترجمين في المعارض والمؤتمرات.
• العمل في المؤسسات الإعلامية وقنوات التلفزيون.
• العمل في الجهات المختصة بالشؤون الاجتماعية والجمعيات.
• التوظيف في المحاكم والجهات القانونية.
• العمل في الجهات الحكومية والخدمية والقطاع الخاص.
• العمل في مراكز خدمات الصم وضعاف السمع.
• العمل في الجهات التعليمية.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في الترجمة بلغة الإشارة: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D8%AA%D8%B1%D8%AC%D9%85%D8%A9_%D8%A8%D9%84%D8%BA%D8%A9_%D8%A7%D9%84%D8%A7%D8%B4%D8%A7%D8%B1%D8%A9_0.pdf\">الرابط</a>",
            "وصف المقررات": "وصف المقررات للدبلوم المتوسط في الترجمة بلغة الإشارة: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/wsf_lmqrrt_lbrnmj_dblwm_ltrjm_blg_lshr.pdf\">الرابط</a>"
        },
        "دبلوم مقدمي الرعاية بالحضانات": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المشارك لمقدمي الرعاية بالحضانات – جامعة الملك سعود</b>
\n\n<b>🌟 مقدمة البرنامج:</b>
تُعد مرحلة الطفولة المبكرة (من الميلاد حتى 3 سنوات) من أهم المراحل، وتوفير رعاية وتعليم عالي الجودة للأطفال مسؤولية كبيرة. البرنامج يركز على تدريب وتأهيل مقدمات رعاية الأطفال في الحضانة، معتمدًا على أفضل البرامج والممارسات العالمية.
\n\n<b>🎯 الخطة الدراسية:</b>
تتضمن مقررات نظرية وعملية لتطوير مهارات مقدمات الرعاية في مختلف جوانب التعامل مع الأطفال.
\n\n<b>💼 الفرص الوظيفية:</b>
• مقدمات رعاية الأطفال في الحضانات، مديرات الحضانة، مشرفات على الحضانة.
""",
            "الخطة الدراسية": "الخطة الدراسية لدبلوم المشارك لمقدمي الرعاية بالحضانات: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D9%85%D9%82%D8%AF%D9%85%D9%8A_%D8%A7%D9%84%D8%B1%D8%B9%D8%A7%D9%8A%D8%A9.pdf\">الرابط</a>"
        },
        "دبلوم اللغة الصينية": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>الدبلوم المتوسط في اللغة الصينية – جامعة الملك سعود</b>
\n\n<b>🎯 الأهداف التعليمية:</b>
• اكتساب أساسيات اللغة الصينية بطريقة متقنة.
• استخدام المفردات والتراكيب اللغوية وقواعدها كتابياً وشفوياً.
• التعرف على الثقافة الصينية والرموز ذات الدلالة.
• الإلمام بمصطلحات وتعبيرات متنوعة في مجالات التجارة، الاقتصاد، السفر، والسياحة.
\n\n<b>💼 الفرص الوظيفية:</b>
• العمل في مجالات الترجمة واللغات.
• تطوير مهارات موظفي الجهات المختلفة.
• المشاركة في برامج التبادل الثقافي والتجاري.
• تلبية احتياجات الجهات التي تسعى لمواكبة التطور في لغات العصر.
""",
            "الخطة الدراسية": "الخطة الدراسية للدبلوم المتوسط في اللغة الصينية: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/%D8%A7%D9%84%D9%84%D8%BA%D8%A9_%D8%A7%D9%84%D8%B5%D9%8A%D9%86%D9%8A%D8%A9_0.pdf\">الرابط</a>",
            "وصف المقررات": "وصف المقررات للدبلوم المتوسط في اللغة الصينية: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/wsq_lmqrrt_lbrnmj_ldblwm_fy_llg_lsyny.pdf\">الرابط</a>"
        },
        "الدبلوم المشارك في العمل الخيري": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🔹 <b>دبلوم المشارك في العمل الخيري – جامعة الملك سعود</b>
\n\n<b>🎯 الأهداف:</b>
• دعم وتطوير قطاع العمل الخيري عبر تأهيل كوادر بشرية متميزة.
• تزويد الطلبة بأحدث المعارف والنظريات في إدارة العمل الخيري.
• التعرف على الأساليب العلمية لإعداد البحوث والدراسات.
• رفد القطاعين الخيري والتنموي بإداريين مبدعين.
• نشر ثقافة التنمية المستدامة والمسؤولية الاجتماعية.
\n\n<b>💼 الفرص الوظيفية:</b>
• مؤسسات العمل الخيري، الأوقاف، المنظمات غير الحكومية.
• الجهات الحكومية التابعة لوزارة العمل والشؤون الاجتماعية.
""",
            "وصف المقررات": "وصف المقررات لدبلوم المشارك في العمل الخيري: <a href=\"https://ascs.ksu.edu.sa/sites/ascs.ksu.edu.sa/files/attach/wsf_mqrrt_brnmj_dblwm_lml_lkhyry.pdf\">الرابط</a>"
        }
    },
    "تخصصات برامج الدبلوم - عن بُعد": {
        "menu_text": "الرجاء اختيار تخصص الدبلوم عن بُعد:",
        "options": [
            "شرح - البلاك بورد / Blackboard",
            "دبلوم الإدارة المالية والمصرفية - عن بعد.",
            "دبلوم إدارة أعمال التأمين - عن بعد.",
            "دبلوم التسويق – عن بعد",
            "خدمات طلابية ، متابعة الاعمال الفصلية",
            "كتب و ملخصات مواد الدبلوم عن بعد 📚 PDF",
            "🔙 رجوع"
        ],
        "شرح - البلاك بورد / Blackboard": """شرح استخدام- البلاك بورد/ Blackboard ->
<a href="https://t.me/Diploma_Solutions/16">https://t.me/Diploma_Solutions/16</a>""",
        "دبلوم الإدارة المالية والمصرفية - عن بعد.": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🎓 <b>الدبلوم المتوسط في الإدارة المالية والمصرفية – جامعة الملك سعود</b>
يهدف البرنامج إلى إعداد كوادر مؤهلة في المالية والمصرفية، قادرة على مواكبة التغيرات الاقتصادية وتلبية احتياجات سوق العمل.
\n\n<b>🎯 الأهداف:</b>
1.  إكساب المعرفة بالمفاهيم والمبادئ والأنظمة المالية والمصرفية.
2.  تأهيل الطلاب للتطورات الحديثة في القطاع.
3.  إعداد الخريجين لوظائف متنوعة في المؤسسات المالية والبنكية.
4.  تنمية مهاراتهم التحليلية، التواصلية، والرقمية.
\n\n<b>📘 المخرجات:</b>
•   فهم الأدوات المالية، التحليل المالي، أنواع المؤسسات والأسواق المالية، وأساسيات الإدارة المالية والاستثمار.
•   القدرة على تحليل البيانات المالية، التنبؤ بالمخاطر، وحل القضايا المالية.
•   الالتزام بالأخلاقيات المهنية والعمل الجماعي.
•   إتقان الاتصال الشفهي والكتابي، استخدام التحليل الكمي، وتوظيف الحاسب الآلي في المهام المالية.
\n\n<b>💼 الفرص الوظيفية:</b>
يشمل العمل في:
•   المنشآت الاقتصادية، البنوك (تجارية وإسلامية)، شركات التأمين، البنك المركزي السعودي، مكاتب الصرافة.
•   القطاعات المالية بالجهات الحكومية، وزارة المالية.
\n<b>أمثلة للوظائف:</b>
•   أمين صندوق، مأمور صرف، مساعد مدير مالي، مراقب مالي، مدقق حسابات، محصل إيرادات، مراقب تجاري.
وغيرها من الوظائف ذات الصلة بالمجال المالي والمصرفي.
""",
            "الخطة الدراسية": "◆ الخطة الدراسية للدبلوم المتوسط في الإدارة المالية والمصرفية -> : <a href=\"https://drive.google.com/file/d/11Re6r3MibiqyMxrlg0jh-X_SZGrOu5Cb/view?usp=drivesdk\">https://drive.google.com/file/d/11Re6r3MibiqyMxrlg0jh-X_SZGrOu5Cb/view?usp=drivesdk</a>",
            "وصف المقررات": "◆ وصف مقررات دبلوم الإدارة المالية والمصرفية <a href=\"https://drive.google.com/file/d/11OtBZQauC278G2cqTkh2fSruXLHrqlf3/view?usp=drivesdk\">https://drive.google.com/file/d/11OtBZQauC278G2cqTkh2fSruXLHrqlf3/view?usp=drivesdk</a>"
        },
        "دبلوم إدارة أعمال التأمين - عن بعد.": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """🎓 <b>الدبلوم المتوسط في إدارة أعمال التأمين</b> – <b>جامعة الملك سعود</b>
🔹 <b>أهداف البرنامج:</b>
• إكساب الطلاب المبادئ الفنية والإجراءات العملية لصناعة التأمين.
• تأهيل الطلاب لمواكبة التطورات في قطاع التأمين.
• إعداد خريجين مؤهلين للعمل في الوظائف التأمينية.
• تطوير المهارات العلمية والعملية اللازمة لأداء المهام الوظيفية.
🔹 <b>مخرجات تعلم البرنامج:</b>
<b>📘 المعرفة:</b>
• التعرف على أنواع التأمين وأهميتها.
• تحليل وقياس الأخطار واختيار طرق التعامل معها.
• فهم الأسس الفنية والقانونية للتأمين.
• متابعة التطورات المهنية والتقنية في قطاع التأمين.
<b>🧠 المهارات المعرفية:</b>
• تحليل مشكلات التأمين وتقديم حلول منطقية.
• تسويق الخدمات التأمينية باستخدام مهارات الاتصال.
• استخدام المعرفة التقنية في اتخاذ القرارات العملية.
• فهم الآثار المترتبة على قرارات التأمين.
<b>🤝 المهارات الشخصية والمسؤولية:</b>
• الالتزام بالقيم الأخلاقية.
• الاستعداد لتحمل مسؤوليات العمل التأميني.
• القدرة على تقييم الذات وتطوير التعلم المستمر.
<b>📊 المهارات التقنية والعددية:</b>
• تحليل وتقديم البيانات شفهياً وكتابياً.
• تطبيق الأساليب الإحصائية في حل المشكلات.
• استخدام التقنية في البحث والتحليل والعرض.
📌 <b>ملاحظة:</b>
جميع المعلومات الخاصة بتخصصات <i>الدبلوم الحضوري</i> و<i>الدبلوم عن بُعد</i> متوفرة داخل البوت منعًا للتشتت وكثرة الرسائل.""",
            "الخطة الدراسية": "◆ الخطة الدراسية الدبلوم المتوسط في إدارة أعمال التأمين -> : <a href=\"https://drive.google.com/file/d/11lvBlBykFUFn-3gvjqpojfmuE7BZ1nW_/view?usp=drivesdk\">https://drive.google.com/file/d/11lvBlBykFUFn-3gvjqpojfmuE7BZ1nW_/view?usp=drivesdk</a>",
            "وصف المقررات": "◆ وصف مقررات الدبلوم المتوسط في إدارة أعمال التأمين <a href=\"https://drive.google.com/file/d/11OtBZQauC278G2cqTkh2fSruXLHrqlf3/view?usp=drivesdk\">https://drive.google.com/file/d/11OtBZQauC278G2cqTkh2fSruXLHrqlf3/view?usp=drivesdk</a>"
        },
        "دبلوم التسويق – عن بعد": {
            "menu_text": "الرجاء اختيار: ",
            "options": [
                "تعريف بالتخصص",
                "الخطة الدراسية",
                "وصف المقررات",
                "🔙 رجوع"
            ],
            "تعريف بالتخصص": """شكرًا لتوفير هذه المعلومات. إليك <b>ملخصًا منسقًا</b> لتخصص <b>الدبلوم المتوسط في التسويق "عن بُعد"</b>، يمكن استخدامه في العروض أو الملفات التعريفية:
<b>🧾 الدبلوم المتوسط في التسويق "عن بُعد" – جامعة الملك سعود</b>
<b>🎯 الأهداف العامة والفرعية:</b>
• إعداد الطلاب للعمل بكفاءة واحترافية في الوظائف التسويقية.
• تأهيل نظري وعملي في التسويق الحديث وتطبيقاته.
• تنمية المهارات العملية واستخدام التقنية في اتخاذ القرار.
• تعزيز الفهم للمفاهيم التسويقية والتحديات الميدانية.
• تهيئة الخريجين نفسيًا ومهنيًا لسوق العمل.
<b>📘 المخرجات المعرفية:</b>
• إتقان المصطلحات والمفاهيم والتقنيات التسويقية.
• فهم القضايا المعاصرة في بيئات التسويق.
• التمكن من أدوات وتقنيات البحث التسويقي.
• فهم أدوات وتقنيات التسويق داخليًا وخارجيًا.
• إدراك دور التكنولوجيا في ممارسات التسويق.
<b>🛠 ️ المخرجات المهارية:</b>
• العمل بكفاءة ضمن فرق أو بشكل فردي.
• الالتزام بالمعايير الأخلاقية في التسويق.
• التواصل الفعّال كتابيًا وشفويًا باستخدام التقنية.
• استخدام التحليل الكمي والبيانات في حل المشكلات.
<b>💼 الفرص الوظيفية:</b>
يمكن لخريجي الدبلوم العمل في القطاعين الحكومي والخاص في الوظائف التالية:
• مأمور مبيعات
• مساعد مدرب (في التسويق)
• مدقق مشتريات مساعد
• محصل إيرادات
• مأمور مشتريات
• مراقب تجاري
• كاتب في إدارة التسويق
📌 <b>لمزيد من التفاصيل حول برامج الدبلوم (حضوري وعن بُعد):</b>""",
            "الخطة الدراسية": "◆ الخطة الدراسية الدبلوم المتوسط في التسويق -> : <a href=\"https://drive.google.com/file/d/11yZhKDyLJUiEMS4sW9MTLcnjwnXibB4G/view?usp=drivesdk\">https://drive.google.com/file/d/11yZhKDyLJUiEMS4sW9MTLcnjwnXibB4G/view?usp=drivesdk</a>",
            "وصف المقررات": "◆ وصف مقررات الدبلوم المتوسط في التسويق <a href=\"https://drive.google.com/file/d/11onug3ZiaUdW_B6v504xAiVQXU0AIv43/view?usp=drivesdk\">https://drive.google.com/file/d/11onug3ZiaUdW_B6v504xAiVQXU0AIv43/view?usp=drivesdk</a> -> <a href=\"https://t.me/Diploma_Solutions/23\">https://t.me/Diploma_Solutions/23</a>"
        },
        "خدمات طلابية ، متابعة الاعمال الفصلية": """🎯 خدمة الاشتراك في حلول ومتابعة الأعمال الفصلية
هل وقتك ضيّق؟ هل تجد صعوبة في متابعة المهام الجامعية؟ 🤯
📚 لا تقلق! اشترك الآن في خدمة متابعة الأعمال الفصلية وكن مطمئنًا على درجاتك طوال الترم.
✅ الاشتراك يشمل:
• 🔹 حل جميع الواجبات والمناقشات والمشاريع.
• 🔹 حل الاكتيفيتي الأسبوعي بانتظام.
• 🔹 حل الكويزات والاختبارات القصيرة والذاتية.
• 🔹 إرسال تقارير أسبوعية أو شهرية توضح ما تم إنجازه.
• 🔹 ضمان كامل درجات أعمال الفصل لكل مادة.
📌 اشترك وارتاح من القلق والتأخير!
🎓 الخدمة مقدّمة باحترافية وسرية تامة
📲 للتواصل والاشتراك:
عبر واتساب:
اضغط هنا للتواصل:
منصة عون الأكاديمية. <a href="https://wa.me/967733365187">https://wa.me/967733365187</a>
✍️ دمتم بود وتوفيق دائم بإذن الله 🌿""",
        "كتب و ملخصات مواد الدبلوم عن بعد 📚 PDF": """قناه خاصه كتب وملخصات وتجميعات والاختبارات الذاتية مواد دبلوم جامعة سعودKSU) )
📌 رابط قناة مستجدين دبلوم الملك سعود
<a href="https://t.me/Diploma_New_1447">https://t.me/Diploma_New_1447</a>
رابط القناة
<a href="https://t.me/KDiplomasSU">https://t.me/KDiplomasSU</a>"""
    },
    "قناة وإعلانات الدبلوم 📢": """♦ (قناة أخبار) دبلومات جامعة الملك سعود:
🔗 رابط القناة: <a href="https://t.me/KSDN_222">https://t.me/KSDN_222</a>
♦ قناه تابعه ل قروب دبلوم جامعه الملك سعود:
قناة خاصة بحلول واجبات واختبارات مواد الدبلوم بجامعة
الملك سعود KSU
🔗 رابط القناة: <a href="https://t.me/Diploma_Solutions">https://t.me/Diploma_Solutions</a>""",
    "خدمات حل الواجبات وعمل المشاريع والبحوث": """🎓 <b>منصة عونك الأكاديمية – لجميع طلاب دبلومات جامعة الملك سعود</b>
🔸 <i>سواء كنت طالبًا مستجدًا أو في أحد المستويات المتقدمة، وفرنا لك كل ما تحتاجه في مكانٍ واحد.</i>
💼 <b>خدماتنا تشمل:</b>
• ▪️ حل الواجبات الأكاديمية بجودة عالية
• ▪️ إعداد البحوث والتقارير الاحترافية (Word | PDF | Excel)
• ▪️ تصميم العروض التقديمية PowerPoint بأسلوب مميز
• ▪️ تنفيذ المشاريع الدراسية بدقة واحترافية
• ▪️ دعم كامل في الأعمال الفصلية ومهام المواد
🧠 نضم فريقًا من <b>المتخصصين الأكاديميين</b> في مختلف المجالات، نختار الأنسب لطلبك لضمان أعلى جودة ممكنة.
📌 تابع قناتنا الرسمية لجميع الخدمات الطلابية:
🔗 <a href="https://t.me/Diploma_Solutions">منصتي – خدمات طلاب دبلوم جامعة الملك سعود</a>:
<a href="https://t.me/Diploma_Solutions">https://t.me/Diploma_Solutions</a>
<a href="https://t.me/Aoun_Academic">https://t.me/Aoun_Academic</a>
💬 للتواصل وطلب الخدمات مباشرة:
🔗 <a href="https://wa.me/967733365187">اضغط هنا للتواصل عبر الواتساب</a>
⭐️ <i>جودة، سرعة، خصوصية – لأن نجاحك هو هدفنا.</i>
✍️ <b>معكم خطوة بخطوة حتى التخرج – دمتم بخير 🌿</b>""",
    "مواقع فروع جامعة الملك سعود": """⚪️ <b>مواقع فروع جامعة الملك سعود</b>
• 🔸 جامعة الملك سعود (عليشة بنات): <a href="https://maps.app.goo.gl/nHSKPBWHqAdvspmz8?g_st=it">الخريطة</a>
• 🔸 جامعة الملك سعود (الروابي - مشترك): <a href="https://maps.app.goo.gl/1Xf9MqXCPs9fVkng7?g_st=it">الخريطة</a>
• 🔸 جامعة الملك سعود (المبنى الرئيسي - تركي الأول): <a href="https://maps.app.goo.gl/NjeJTWoj4mhK5MUKA?g_st=it">الخريطة</a>
• 🔸 جامعة الملك سعود (الملز): <a href="https://maps.app.goo.gl/4bnaxNA8vMDRSp9D7">الخريطة</a>
• 🔸 جامعة الملك سعود (الوشم - عيال): <a href="https://maps.app.goo.gl/sCo9BkV1WaEeXVGa8?g_st=it">الخريطة</a>
• 🔸 جامعة الملك سعود (المدينة الجامعية للطالبات): <a href="https://maps.me/EZcL9XVz1w8UomYF6?g_st=ic">الخريطة</a>""",
    "شروط التجسير في جامعة الملك سعود": """شروط التجسير في جامعة الملك سعود
<a href="https://t.me/Diploma_Solutions/24">https://t.me/Diploma_Solutions/24</a>""",
    "🛑شرح استخدام – البلاك بورد / Blackboard 🛑": """شرح استخدام- البلاك بورد/ Blackboard ->
<a href="https://t.me/Diploma_Solutions/16">https://t.me/Diploma_Solutions/16</a>"""
}

# Helper function to create a ReplyKeyboardMarkup
def create_keyboard(buttons):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    for button_row in buttons:
        if isinstance(button_row, list): # If it's a list of buttons for a row
            markup.row(*button_row)
        else: # If it's a single button
            markup.add(button_row)
    return markup

# Function to get the main keyboard
def get_main_keyboard():
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    markup.row(*left_commands)
    for tab in right_tabs:
        markup.add(tab)
    return markup

# --- رسالة ترحيب عند /start ---
@bot.message_handler(commands=['start'])
def start_handler(message):
    chat_id = message.chat.id
    user_states[chat_id] = "main_menu" # تعيين حالة المستخدم إلى القائمة الرئيسية
    text = (
        "🔹 <b>ما الذي يمكن لهذا البوت تقديمه؟</b>\n\n"
        "هذا البوت مُخصص لطلاب <b>الدبلوم في جامعة الملك سعود</b>، ويهدف إلى:\n\n"
        "✅ <b>توفير المعلومات الدراسية بسهولة وسرعة</b>\n"
        "✅ <b>مساعدة الطالب في الوصول لكل ما يحتاجه من روابط ومصادر مهمة</b>\n"
        "✅ <b>تقليل الوقت والجهد المبذول في البحث</b>\n"
        "✅ <b>تجميع كل ما يهم الطالب في مكان واحد</b>\n\n"
        "نأمل أن تكون هذه الخدمة عند حسن ظنكم،\n"
        "ونسعد دائمًا بخدمتكم 💙\n"
        "<b>\"جزيل الشكر والتقدير لكم 🌹\"</b>\n\n"
        "قناة مساعدات طلاب الدبلوم 👇\n"
        "<a href=\"https://t.me/Diploma_Solutions\">https://t.me/Diploma_Solutions</a>"
    )
    bot.send_message(chat_id, text, parse_mode="HTML", reply_markup=get_main_keyboard())

# --- التعامل مع أوامر اليسار (star, help) ---
@bot.message_handler(func=lambda m: m.text in left_commands)
def left_command_handler(message):
    chat_id = message.chat.id
    text = message.text
    if text == "star":
        reply = (
            "اضغط على الأوامر الموجودة في القائمة (قائمة في يمين البوت) أدناه لتحصل على كل ما تحتاجه:\n\n"
            "🎯 نأمل أن تنال خدمتنا رضاكم وأن نكون عند حسن ظنكم…"
        )
    elif text == "help":
        reply = "فيديو #شــــــرح_استخدام_البوت سيتوفر قريبا"
    bot.send_message(chat_id, reply, parse_mode="HTML", reply_markup=get_main_keyboard()) # إرجاع لوحة المفاتيح الرئيسية

# --- التعامل مع التبويبات في يمين البوت ---
@bot.message_handler(func=lambda m: True) # يتعامل مع جميع الرسائل النصية
def right_tab_handler(message):
    chat_id = message.chat.id
    user_text = message.text
    current_state = user_states.get(chat_id, "main_menu") # الحصول على حالة المستخدم الحالية

    reply_text = "عذراً، لم أفهم طلبك. الرجاء استخدام الأزرار."
    reply_markup = get_main_keyboard()

    if user_text == "🔙 رجوع":
        # التعامل مع زر الرجوع
        if current_state.startswith("حضوري_sub_sub_menu_"):
            # الرجوع من قائمة فرعية ثالثة للحضوري إلى قائمة الحضوري الفرعية
            user_states[chat_id] = "حضوري_sub_menu"
            reply_text = bot_content["تخصصات برامج الدبلوم - حضوري"]["menu_text"]
            reply_markup = create_keyboard(bot_content["تخصصات برامج الدبلوم - حضوري"]["options"])
        elif current_state == "حضوري_sub_menu":
            user_states[chat_id] = "main_menu"
            reply_text = "تم الرجوع إلى القائمة الرئيسية."
            reply_markup = get_main_keyboard()
        elif current_state.startswith("عن_بعد_sub_sub_menu_"): # للرجوع من قوائم الدبلوم عن بعد الفرعية
            parent_menu = current_state.replace("عن_بعد_sub_sub_menu_", "")
            if parent_menu in bot_content["تخصصات برامج الدبلوم - عن بُعد"]:
                user_states[chat_id] = "عن_بعد_sub_menu"
                reply_text = bot_content["تخصصات برامج الدبلوم - عن بُعد"]["menu_text"]
                reply_markup = create_keyboard(bot_content["تخصصات برامج الدبلوم - عن بُعد"]["options"])
            else:
                user_states[chat_id] = "main_menu"
                reply_text = "تم الرجوع إلى القائمة الرئيسية."
                reply_markup = get_main_keyboard()
        elif current_state == "عن_بعد_sub_menu":
            user_states[chat_id] = "main_menu"
            reply_text = "تم الرجوع إلى القائمة الرئيسية."
            reply_markup = get_main_keyboard()
        else:
            user_states[chat_id] = "main_menu"
            reply_text = "أنت بالفعل في القائمة الرئيسية."
            reply_markup = get_main_keyboard()
    elif current_state == "main_menu":
        # معالجة التبويبات الرئيسية
        if user_text in bot_content:
            content_item = bot_content[user_text]
            if isinstance(content_item, dict) and "options" in content_item:
                # إذا كان التبويب يؤدي إلى قائمة فرعية
                reply_text = content_item["menu_text"]
                reply_markup = create_keyboard(content_item["options"])
                if user_text == "تخصصات برامج الدبلوم - حضوري":
                    user_states[chat_id] = "حضوري_sub_menu"
                elif user_text == "تخصصات برامج الدبلوم - عن بُعد":
                    user_states[chat_id] = "عن_بعد_sub_menu"
            else:
                # إذا كان التبويب يؤدي إلى نص مباشر
                reply_text = content_item
                reply_markup = get_main_keyboard() # البقاء على لوحة المفاتيح الرئيسية
        else:
            reply_text = "عذراً، هذا التبويب غير موجود. الرجاء استخدام الأزرار."
            reply_markup = get_main_keyboard()
    elif current_state == "حضوري_sub_menu":
        # معالجة خيارات قائمة الدبلوم الحضوري الفرعية
        if user_text in bot_content["تخصصات برامج الدبلوم - حضوري"]:
            content_item = bot_content["تخصصات برامج الدبلوم - حضوري"][user_text]
            if isinstance(content_item, dict) and "options" in content_item:
                # إذا كان الخيار يؤدي إلى قائمة فرعية أخرى (مثل تعريف بالتخصص)
                reply_text = content_item["menu_text"]
                reply_markup = create_keyboard(content_item["options"])
                user_states[chat_id] = f"حضوري_sub_sub_menu_{user_text}" # تحديث الحالة للقائمة الفرعية الثالثة للحضوري
            else:
                # إذا كان الخيار يؤدي إلى نص مباشر (وهذا لن يحدث بعد التعديل)
                reply_text = content_item
                reply_markup = create_keyboard(bot_content["تخصصات برامج الدبلوم - حضوري"]["options"]) # البقاء على لوحة مفاتيح الدبلوم الحضوري
        else:
            reply_text = "عذراً، هذا التخصص غير موجود في قائمة الدبلوم الحضوري. الرجاء استخدام الأزرار."
            reply_markup = create_keyboard(bot_content["تخصصات برامج الدبلوم - حضوري"]["options"])
    elif current_state.startswith("حضوري_sub_sub_menu_"):
        # معالجة خيارات القوائم الفرعية الثالثة للحضوري (مثل تعريف بالتخصص، الخطة الدراسية)
        parent_menu_key = current_state.replace("حضوري_sub_sub_menu_", "")
        if parent_menu_key in bot_content["تخصصات برامج الدبلوم - حضوري"] and \
           isinstance(bot_content["تخصصات برامج الدبلوم - حضوري"][parent_menu_key], dict) and \
           user_text in bot_content["تخصصات برامج الدبلوم - حضوري"][parent_menu_key]:
            content_item = bot_content["تخصصات برامج الدبلوم - حضوري"][parent_menu_key][user_text]
            reply_text = content_item
            reply_markup = create_keyboard(bot_content["تخصصات برامج الدبلوم - حضوري"][parent_menu_key]["options"]) # البقاء على لوحة المفاتيح الفرعية الثالثة
        else:
            reply_text = "عذراً، هذا الخيار غير موجود. الرجاء استخدام الأزرار."
            # محاولة العودة إلى القائمة الفرعية الثانية إذا لم يتم العثور على الخيار
            if parent_menu_key in bot_content["تخصصات برامج الدبلوم - حضوري"] and \
               isinstance(bot_content["تخصصات برامج الدبلوم - حضوري"][parent_menu_key], dict):
                reply_markup = create_keyboard(bot_content["تخصصات برامج الدبلوم - حضوري"][parent_menu_key]["options"])
            else:
                reply_markup = get_main_keyboard() # إذا فشل كل شيء، العودة إلى القائمة الرئيسية
                user_states[chat_id] = "main_menu"
    elif current_state == "عن_بعد_sub_menu":
        # معالجة خيارات قائمة الدبلوم عن بُعد الفرعية
        if user_text in bot_content["تخصصات برامج الدبلوم - عن بُعد"]:
            content_item = bot_content["تخصصات برامج الدبلوم - عن بُعد"][user_text]
            if isinstance(content_item, dict) and "options" in content_item:
                # إذا كان الخيار يؤدي إلى قائمة فرعية أخرى (مثل تعريف بالتخصص)
                reply_text = content_item["menu_text"]
                reply_markup = create_keyboard(content_item["options"])
                user_states[chat_id] = f"عن_بعد_sub_sub_menu_{user_text}" # تحديث الحالة للقائمة الفرعية الثالثة
            else:
                # إذا كان الخيار يؤدي إلى نص مباشر
                reply_text = content_item
                reply_markup = create_keyboard(bot_content["تخصصات برامج الدبلوم - عن بُعد"]["options"]) # البقاء على لوحة مفاتيح الدبلوم عن بعد
        else:
            reply_text = "عذراً، هذا الخيار غير موجود في قائمة الدبلوم عن بُعد. الرجاء استخدام الأزرار."
            reply_markup = create_keyboard(bot_content["تخصصات برامج الدبلوم - عن بُعد"]["options"])
    elif current_state.startswith("عن_بعد_sub_sub_menu_"):
        # معالجة خيارات القوائم الفرعية الثالثة (مثل تعريف بالتخصص، الخطة الدراسية)
        parent_menu_key = current_state.replace("عن_بعد_sub_sub_menu_", "")
        if parent_menu_key in bot_content["تخصصات برامج الدبلوم - عن بُعد"] and \
           isinstance(bot_content["تخصصات برامج الدبلوم - عن بُعد"][parent_menu_key], dict) and \
           user_text in bot_content["تخصصات برامج الدبلوم - عن بُعد"][parent_menu_key]:
            content_item = bot_content["تخصصات برامج الدبلوم - عن بُعد"][parent_menu_key][user_text]
            reply_text = content_item
            reply_markup = create_keyboard(bot_content["تخصصات برامج الدبلوم - عن بُعد"][parent_menu_key]["options"]) # البقاء على لوحة المفاتيح الفرعية الثالثة
        else:
            reply_text = "عذراً، هذا الخيار غير موجود. الرجاء استخدام الأزرار."
            # محاولة العودة إلى القائمة الفرعية الثانية إذا لم يتم العثور على الخيار
            if parent_menu_key in bot_content["تخصصات برامج الدبلوم - عن بُعد"] and \
               isinstance(bot_content["تخصصات برامج الدبلوم - عن بُعد"][parent_menu_key], dict):
                reply_markup = create_keyboard(bot_content["تخصصات برامج الدبلوم - عن بُعد"][parent_menu_key]["options"])
            else:
                reply_markup = get_main_keyboard() # إذا فشل كل شيء، العودة إلى القائمة الرئيسية
                user_states[chat_id] = "main_menu"

    # إضافة طباعة لتصحيح الأخطاء (ستظهر في سجلات Render)
    print(f"DEBUG: Sending message to {chat_id}. Current state: {current_state}. User text: {user_text}")
    print(f"DEBUG: Reply text length: {len(reply_text)}. Reply text starts with: {reply_text[:100].replace('\n', ' ')}")
    try:
        # استخدام parse_mode="HTML" لضمان عرض المحتوى بشكل صحيح
        bot.send_message(chat_id, reply_text, parse_mode="HTML", reply_markup=reply_markup)
    except telebot.apihelper.ApiTelegramException as e:
        print(f"ERROR: Failed to send message to {chat_id}: {e}")
        # إرسال رسالة خطأ للمستخدم بدلاً من الفشل الصامت
        bot.send_message(chat_id, "عذراً، حدث خطأ أثناء عرض المحتوى. الرجاء المحاولة لاحقاً.", parse_mode="HTML", reply_markup=reply_markup)


# --- Webhook endpoint for Flask ---
@app.route('/' + TOKEN, methods=['POST'])
def getMessage():
    # استلام بيانات الـ Webhook من تليجرام
    json_str = request.get_data().decode('UTF-8')
    # تحويل بيانات JSON إلى كائن Update
    update = telebot.types.Update.de_json(json_str)
    # معالجة التحديثات الجديدة بواسطة البوت
    bot.process_new_updates([update])
    # إرجاع استجابة 200 OK لتليجرام
    return "!", 200

@app.route('/')
def webhook():
    # نزيل أي Webhook قديم (للتأكد من عدم وجود تعارض)
    bot.remove_webhook()
    # نقوم بتعيين Webhook جديد باستخدام عنوان URL الصحيح لـ Render
    bot.set_webhook(url=RENDER_WEBHOOK_URL)
    return "Webhook set", 200

if __name__ == '__main__':
    # عند بدء تشغيل التطبيق، نقوم بتعيين الـ Webhook
    # هذا يضمن أن الـ Webhook يتم تعيينه في كل مرة يتم فيها بدء تشغيل التطبيق
    bot.remove_webhook()
    bot.set_webhook(url=RENDER_WEBHOOK_URL)

    # تشغيل تطبيق Flask.
    # '0.0.0.0' يجعل التطبيق متاحًا من أي عنوان IP خارجي.
    # 'PORT' يتم جلبه من متغيرات البيئة (عادةً 5000 على Render).
    app.run(host="0.0.0.0", port=int(os.environ.get('PORT', 5000)))
            
